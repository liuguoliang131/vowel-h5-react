{"version":3,"file":"static/js/396.2519107c.chunk.js","mappings":"6PAiIA,MAzHA,WACE,OAAsCA,EAAAA,EAAAA,UAAS,GAA/C,eAAOC,EAAP,KAAoBC,EAApB,KACA,GAAeF,EAAAA,EAAAA,UAAS,IAGxB,IAHA,gBAGgCA,EAAAA,EAAAA,UAAS,CACvCG,gBAAiB,GACjBC,gBAAiB,MAFnB,eAAOC,EAAP,KAAiBC,EAAjB,KAkBA,GAAwBN,EAAAA,EAAAA,UAAS,IAAjC,eAAOO,EAAP,KAAaC,EAAb,KACA,GAA8BR,EAAAA,EAAAA,WAAS,GAAvC,eAAOS,EAAP,KAAgBC,EAAhB,KAxBmB,8CAyBnB,mHAEsBC,EAAAA,EAAAA,IAAoB,CACpCC,UAAW,IACXC,KAAMZ,IAJZ,OAEUa,EAFV,OAMIZ,GAAe,SAAAa,GAAG,OAAIA,EAAM,CAAV,IACD,IAAbD,EAAIE,MACNN,GAAW,GAERI,EAAIP,MAASO,EAAIP,KAAKU,MAASH,EAAIP,KAAKU,KAAKC,QAGhDV,GAAQ,SAAAO,GAAG,wBAAQA,IAAR,OAAgBD,EAAIP,KAAKU,MAAzB,IACXX,EAAY,CACVH,gBAAiBW,EAAIP,KAAKJ,gBAC1BC,gBAAiBU,EAAIP,KAAKH,kBAE5BM,EAAWI,EAAIP,KAAKU,KAAKC,OAAS,IAPlCR,GAAW,GAXjB,sDAqBIA,GAAW,GArBf,+DAzBmB,sBA2DnB,IAAMS,EAAS,yCAAG,yGAEdjB,EAAe,GAFD,UAGIS,EAAAA,EAAAA,IAAoB,CACpCC,UAAWQ,SAASC,MAAMC,GAC1BT,KAAMZ,IALM,OAGRa,EAHQ,OAOdZ,GAAe,SAAAa,GAAG,OAAIA,EAAM,CAAV,IAClBQ,QAAQC,IAAI,MAAOV,GACdA,EAAIP,MAASO,EAAIP,KAAKU,MAASH,EAAIP,KAAKU,KAAKC,QAIhDZ,EAAY,CACVH,gBAAiBW,EAAIP,KAAKJ,gBAC1BC,gBAAiBU,EAAIP,KAAKH,kBAE5BI,GAAQ,SAAAO,GAAG,cAAQD,EAAIP,KAAZ,IACXG,EAAWI,EAAIP,KAAKU,KAAKC,OAAS,KARlCV,EAAQ,IACRE,GAAW,IAXC,wDAqBdA,GAAW,GArBG,+DAAH,qDAyBf,OACE,iBAAKe,UAAU,WAAf,WACE,SAAC,IAAD,CAASC,KAAK,8BACd,SAAC,KAAD,CACEP,UAAW,kBAAMA,GAAN,EADb,UAGE,iBAAKM,UAAU,OAAf,WACE,gBAAKA,UAAU,aAAf,SAEIlB,EAAKoB,KAAI,SAACC,EAAMC,GAAP,OACP,iBAAKJ,UAAU,OAAf,WACE,gBAAKA,UAAU,aAAf,SAA6BG,EAAKE,SAClC,gBAAKL,UAAU,aAAf,UACE,kBAAOM,UAAQ,EAACC,aAAa,8BAC3BC,OAAQL,EAAKM,QACbC,yBAAuB,EACvBC,OAAQ,SAACC,GAAD,OAzFF,SAACR,EAAOQ,GAChCd,QAAQC,IAAIK,EAAOQ,GACnB,IAAMC,EAAeC,SAASC,qBAAqB,SACnDjB,QAAQC,IAAI,eAAgBc,GAC5B,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAAapB,OAAQuB,IAAK,CAC5C,IAAMb,EAAOU,EAAaG,GACtBZ,IAAUY,GACZb,EAAKc,OAER,CACF,CA+EkCC,CAAkBd,EAAOQ,EAAhC,EAHV,UAIE,mBAAQO,IAAKhB,EAAKiB,UAAWC,KAAK,oBAPbjB,EADpB,OAeb,gBAAKJ,UAAU,SAAf,UACE,iBAAKA,UAAU,iBAAf,WACE,uGACA,2BAAMpB,EAASF,gBAAf,IAAiCE,EAASD,yBAG9C,SAAC,KAAD,CAAgB2C,SAlHL,2CAkHyBtC,QAASA,WAKtD,C","sources":["pages/myCourse/index.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport Crumbs1 from '../../components/crumbs1'\r\nimport { PullToRefresh, InfiniteScroll } from 'antd-mobile'\r\n// import { sleep } from 'antd-mobile/es/utils/sleep'\r\nimport { mockRequest } from './mock-request.jsx'\r\nimport './index.scss'\r\nimport { courseLessonListApi } from '../../axios/api'\r\n\r\nfunction MyCourse () {\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [list] = useState([\r\n\r\n  ])\r\n  const [dataTime, setDataTime] = useState({\r\n    expiration_time: '',\r\n    push_award_time: ''\r\n  })\r\n\r\n  // 播放按钮\r\n  const handlePauseOthter = (index, e) => {\r\n    console.log(index, e)\r\n    const videoDomList = document.getElementsByTagName('video')\r\n    console.log('videoDomList', videoDomList)\r\n    for (let i = 0; i < videoDomList.length; i++) {\r\n      const item = videoDomList[i]\r\n      if (index !== i) {\r\n        item.pause()\r\n      }\r\n    }\r\n  }\r\n\r\n  const [data, setData] = useState([])\r\n  const [hasMore, setHasMore] = useState(true)\r\n  async function loadMore () {\r\n    try {\r\n      const res = await courseLessonListApi({\r\n        course_id: '1' || location.state.id,\r\n        page: currentPage\r\n      })\r\n      setCurrentPage(val => val + 1)\r\n      if (res.code !== 0) {\r\n        setHasMore(false)\r\n      }\r\n      if (!res.data || !res.data.list || !res.data.list.length) {\r\n        setHasMore(false)\r\n      } else {\r\n        setData(val => [...val, ...res.data.list])\r\n        setDataTime({\r\n          expiration_time: res.data.expiration_time,\r\n          push_award_time: res.data.push_award_time\r\n        })\r\n        setHasMore(res.data.list.length > 0)\r\n      }\r\n    } catch (error) {\r\n      setHasMore(false)\r\n      throw error\r\n    }\r\n    // const append = await mockRequest([\r\n    //   { name: '第一课', id: 1 },\r\n    //   { name: '第二课', id: 2 },\r\n    //   { name: '第三课', id: 3 }\r\n    // ])\r\n    // setData(val => [...val, ...append])\r\n    // setHasMore(append.length > 0)\r\n  }\r\n\r\n  // 下拉刷新\r\n  const onRefresh = async () => {\r\n    try {\r\n      setCurrentPage(1)\r\n      const res = await courseLessonListApi({\r\n        course_id: location.state.id,\r\n        page: currentPage\r\n      })\r\n      setCurrentPage(val => val + 1)\r\n      console.log('res', res)\r\n      if (!res.data || !res.data.list || !res.data.list.length) {\r\n        setData([])\r\n        setHasMore(false)\r\n      } else {\r\n        setDataTime({\r\n          expiration_time: res.data.expiration_time,\r\n          push_award_time: res.data.push_award_time\r\n        })\r\n        setData(val => [...res.data])\r\n        setHasMore(res.data.list.length > 0)\r\n      }\r\n    } catch (error) {\r\n      setHasMore(false)\r\n      throw error\r\n    }\r\n  }\r\n  return (\r\n    <div className='MyCourse'>\r\n      <Crumbs1 text=\"我的奖品\"></Crumbs1>\r\n      <PullToRefresh\r\n        onRefresh={() => onRefresh()}\r\n      >\r\n        <div className=\"list\">\r\n          <div className=\"scroll-box\">\r\n            {\r\n              data.map((item, index) => (\r\n                <div className=\"item\" key={index}>\r\n                  <div className=\"item-title\">{item.title}</div>\r\n                  <div className=\"item-video\">\r\n                    <video controls controlslist=\"nodownload noremoteplayback\"\r\n                      poster={item.img_url}\r\n                      disablePictureInPicture\r\n                      onPlay={(e) => handlePauseOthter(index, e)}>\r\n                      <source src={item.video_url} type=\"video/mp4\" />\r\n                    </video>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n          <div className=\"footer\">\r\n            <div className=\"footer-content\">\r\n              <div>提示：本次课程的有效期为</div>\r\n              <div>{dataTime.expiration_time}-{dataTime.push_award_time}</div>\r\n            </div>\r\n          </div>\r\n          <InfiniteScroll loadMore={loadMore} hasMore={hasMore} />\r\n        </div>\r\n        </PullToRefresh>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyCourse\r\n"],"names":["useState","currentPage","setCurrentPage","expiration_time","push_award_time","dataTime","setDataTime","data","setData","hasMore","setHasMore","courseLessonListApi","course_id","page","res","val","code","list","length","onRefresh","location","state","id","console","log","className","text","map","item","index","title","controls","controlslist","poster","img_url","disablePictureInPicture","onPlay","e","videoDomList","document","getElementsByTagName","i","pause","handlePauseOthter","src","video_url","type","loadMore"],"sourceRoot":""}