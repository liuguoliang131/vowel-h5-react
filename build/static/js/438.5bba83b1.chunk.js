(self.webpackChunkreact_template=self.webpackChunkreact_template||[]).push([[438],{438:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var n=a(4165),r=a(2982),s=a(5861),c=a(1413),o=a(885),i=a(2791),l=a(6871),d=a(6133),u=a(6998),p=a.n(u),m=a(9642),h=(a(3622),a(6429)),x=a(184);var f=function(){var e=(0,l.TH)(),t=(0,l.s0)();console.log("location",e);var u=(0,i.useState)(1),f=(0,o.Z)(u,2),g=f[0],v=f[1],A=(0,i.useState)([]),w=(0,o.Z)(A,2),y=w[0],j=w[1],N=(0,i.useState)(""),b=(0,o.Z)(N,2),C=b[0],D=b[1],k=function(e){4===e.type?t("/layout/myCourse",{state:(0,c.Z)({},e),replace:!1}):2===e.type&&m.Z.openAppPage({page:"myScorePage",params:(0,c.Z)({},e),isNeedLogin:!0})},R=(0,i.useState)(!0),Z=(0,o.Z)(R,2),S=Z[0],E=Z[1];function _(){return(_=(0,s.Z)((0,n.Z)().mark((function t(){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,h.wh)({promotion_id:e.state.id,page:g});case 3:if(a=t.sent,v((function(e){return e+1})),console.log("res",a),0===a.code){t.next=9;break}return E(!1),t.abrupt("return",!1);case 9:a.data&&a.data.list&&a.data.list.length?(j((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(a.data.list))})),D(a.data.customer_service||""),E(a.data.list.length>0)):E(!1),t.next=17;break;case 12:throw t.prev=12,t.t0=t.catch(0),d.FN.show({content:t.t0.message}),E(!1),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}var I=function(){var t=(0,s.Z)((0,n.Z)().mark((function t(){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(1),t.next=4,(0,h.wh)({promotion_id:e.state.id,page:1});case 4:a=t.sent,v((function(e){return e+1})),console.log("res",a),a.data&&a.data.list&&a.data.list.length?(D(a.data.customer_service||""),j((function(e){return(0,r.Z)(a.data.list)})),E(!0)):(j([]),E(!1)),t.next=15;break;case 10:throw t.prev=10,t.t0=t.catch(0),d.FN.show({content:t.t0.message}),E(!1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),B=function(e){var t=m.Z.getTimeData(e),a=t.y,n=t.mon,r=t.dd,s=t.hh,c=t.MM,o=t.ss;return"".concat(a,".").concat(n,".").concat(r," ").concat(s,":").concat(c,":").concat(o)};return(0,x.jsx)("div",{className:"myPrize",children:(0,x.jsx)(d.t8,{onRefresh:(0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I());case 1:case"end":return e.stop()}}),e)}))),children:(0,x.jsxs)("div",{className:"list",children:[y.map((function(e,t){return 1===e.type?(0,x.jsxs)("div",{className:"item type1",children:[(0,x.jsxs)("div",{className:"item-row1",children:[e.title,(0,x.jsx)("span",{children:"\xd71\u4efd"})]}),(0,x.jsx)("div",{className:"item-row2",children:e.note}),(0,x.jsx)("div",{className:"item-row3",children:(0,x.jsx)("img",{src:e.img_url,alt:""})})]},t):3===e.type?(0,x.jsxs)("div",{className:"item type2",children:[(0,x.jsxs)("div",{className:"item-row1",children:[e.title,(0,x.jsx)("span",{children:"\xd71\u4efd"})]}),(0,x.jsx)("div",{className:"item-row2",children:e.note}),(0,x.jsx)("div",{className:"item-row3",children:(0,x.jsx)("img",{src:e.img_url,alt:""})}),(0,x.jsxs)("div",{className:"item-row4",children:[(0,x.jsx)("div",{className:"item-row4-l copytxt",children:e.batch_no}),(0,x.jsx)("div",{className:"item-row4-r",onClick:function(){return function(e){p()(e.batch_no),d.FN.show({icon:"success",content:"\u590d\u5236\u6210\u529f"})}(e)},children:"\u590d\u5236"})]})]},t):2===e.type?(0,x.jsxs)("div",{className:"item type4",children:[(0,x.jsxs)("div",{className:"item-row1",children:[e.title,(0,x.jsxs)("span",{children:["\xd7",e.integral_num,"\u4efd"]})]}),(0,x.jsx)("div",{className:"item-row2",children:e.note}),(0,x.jsx)("div",{className:"type4-row3",children:(0,x.jsx)("img",{src:e.img_url,alt:""})}),(0,x.jsx)("div",{className:"type4-row4",children:(0,x.jsx)("span",{onClick:function(){return k(e)},children:"\u7acb\u5373\u67e5\u770b"})})]},t):4===e.type?(0,x.jsxs)("div",{className:"item type5",children:[(0,x.jsxs)("div",{className:"item-row1",children:[e.title,(0,x.jsx)("span",{children:"\xd71\u4efd"})]}),(0,x.jsx)("div",{className:"item-row2",children:e.note}),(0,x.jsx)("div",{className:"type5-row3",children:(0,x.jsxs)("span",{onClick:function(){return k(e)},children:[(0,x.jsx)("i",{children:(0,x.jsx)("img",{src:a(676),alt:""})}),"\u7acb\u5373\u89c2\u770b\u8bfe\u7a0b"]})}),(0,x.jsx)("div",{className:"type5-row4",children:"\u6709\u6548\u671f\u4e3a\uff1a"+B(e.push_award_time)+"-"+B(e.expiration_time)})]},t):null})),C?(0,x.jsxs)("div",{className:"footer",children:[(0,x.jsx)("div",{className:"footer-tip",children:"\u5fae\u4fe1\u626b\u7801\u6dfb\u52a0\u5ba2\u670d"}),(0,x.jsx)("img",{src:C,alt:"",className:"qrcode"}),(0,x.jsx)("a",{className:"save-button",download:!0,href:C,children:"\u4fdd\u5b58\u5ba2\u670d\u5fae\u4fe1\u4e8c\u7ef4\u7801"})]}):null,(0,x.jsx)(d.v_,{loadMore:function(){return _.apply(this,arguments)},hasMore:S,children:S?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{children:"\u52a0\u8f7d\u4e2d"}),(0,x.jsx)(d.k_,{})]}):y.length?(0,x.jsx)("span",{children:"\u6ca1\u6709\u66f4\u591a\u4e86"}):(0,x.jsx)("div",{className:"empty-content",children:(0,x.jsxs)("div",{className:"empty-center",children:[(0,x.jsx)("img",{src:a(1439),alt:""}),(0,x.jsx)("span",{children:"\u6ca1\u6709\u62bd\u5230\u5956\u54c1\uff0c\u518d\u63a5\u518d\u5389\uff01"})]})})})]})})})}},6998:function(e,t,a){"use strict";var n=a(2458),r={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,s,c,o,i,l,d=!1;t||(t={}),a=t.debug||!1;try{if(c=n(),o=document.createRange(),i=document.getSelection(),(l=document.createElement("span")).textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),"undefined"===typeof n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var s=r[t.format]||r.default;window.clipboardData.setData(s,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(l),o.selectNodeContents(l),i.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(u){a&&console.error("unable to copy using execCommand: ",u),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(u){a&&console.error("unable to copy using clipboardData: ",u),a&&console.error("falling back to prompt"),s=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(s,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(o):i.removeAllRanges()),l&&document.body.removeChild(l),c()}return d}},2458:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},676:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOCAYAAAAbvf3sAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACqSURBVHgBlZDdDYMgAISFdAEhvHeFbtBNGkdwg7KBTlBHcRNZgJ8FCD1JSbARxUsIAe67AxpjzLIOa+2rqRCBOWTrmRDStW2rSgD9Wz9DCIvW+oPGe03DRoAnSqnMGw+BnxyuOWAeAboaIEkBfF8BougFr8Ob+lulOX43Y0ydAWuq5JwPaaMIIHHC1CPV5ft7gPLed0KIeS9o82jUj0h+lMypIR4iVR4Zk74Nl1E6bwBIbAAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=438.5bba83b1.chunk.js.map