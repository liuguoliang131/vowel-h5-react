"use strict";(self.webpackChunkreact_template=self.webpackChunkreact_template||[]).push([[396],{8396:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(4165),r=a(2982),s=a(5861),c=a(885),i=a(2791),o=(a(3622),a(5664)),l=a(6871),d=a(6429),u=a(9642),h=a(184);var p=function(){var e=(0,l.TH)(),t=(0,i.useState)(1),p=(0,c.Z)(t,2),m=p[0],x=p[1],v=(0,i.useState)([]),_=((0,c.Z)(v,1)[0],(0,i.useState)({expiration_time:"",push_award_time:""})),f=(0,c.Z)(_,2),j=f[0],g=f[1],Z=u.Z.getHashQuery(),w=(0,i.useState)([]),y=(0,c.Z)(w,2),N=y[0],k=y[1],b=(0,i.useState)(!0),M=(0,c.Z)(b,2),S=M[0],T=M[1];function C(){return(C=(0,s.Z)((0,n.Z)().mark((function t(){var a,s,c,i,o;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,d.UJ)({course_id:e.state.course_id||Z.query.course_id,page:m});case 3:a=t.sent,x((function(e){return e+1})),0!==a.code&&T(!1),a.data&&a.data.list&&a.data.list.length?(k((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(a.data.list))})),s=u.Z.getTimeData(1e3*a.data.expiration_time),c=u.Z.getTimeData(1e3*a.data.push_award_time),i="".concat(s.y,".").concat(s.mon,".").concat(s.dd," ").concat(s.hh,":").concat(s.MM,":").concat(s.ss),o="".concat(c.y,".").concat(c.mon,".").concat(c.dd," ").concat(c.hh,":").concat(c.MM,":").concat(c.ss),g({expiration_time:i,push_award_time:o}),T(a.data.list.length>0)):T(!1),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(0),T(!1),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var D=function(){var t=(0,s.Z)((0,n.Z)().mark((function t(){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(1),t.next=4,(0,d.UJ)({course_id:e.state.course_id||Z.query.course_id,page:1});case 4:a=t.sent,x((function(e){return e+1})),console.log("res",a),a.data&&a.data.list&&a.data.list.length?(g({expiration_time:a.data.expiration_time,push_award_time:a.data.push_award_time}),k((function(e){return(0,r.Z)(a.data.list)})),T(a.data.list.length>0)):(k([]),T(!1)),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(0),T(!1),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return(0,h.jsx)("div",{className:"MyCourse",children:(0,h.jsx)(o.t8,{onRefresh:function(){return D()},children:(0,h.jsxs)("div",{className:"list",children:[(0,h.jsx)("div",{className:"scroll-box",children:N.map((function(e,t){return(0,h.jsxs)("div",{className:"item",children:[(0,h.jsx)("div",{className:"item-title",children:e.title}),(0,h.jsx)("div",{className:"item-video",children:(0,h.jsx)("video",{controls:!0,controlslist:"nodownload noremoteplayback",poster:e.img_url,disablePictureInPicture:!0,onPlay:function(e){return function(e,t){console.log(e,t);var a=document.getElementsByTagName("video");console.log("videoDomList",a);for(var n=0;n<a.length;n++){var r=a[n];e!==n&&r.pause()}}(t,e)},children:(0,h.jsx)("source",{src:e.video_url,type:"video/mp4"})})})]},t)}))}),j.expiration_time?(0,h.jsx)("div",{className:"footer",children:(0,h.jsxs)("div",{className:"footer-content",children:[(0,h.jsx)("div",{children:"\u63d0\u793a\uff1a\u672c\u6b21\u8bfe\u7a0b\u7684\u6709\u6548\u671f\u4e3a"}),(0,h.jsxs)("div",{children:[j.push_award_time,"-",j.expiration_time]})]})}):null,(0,h.jsx)(o.v_,{loadMore:function(){return C.apply(this,arguments)},hasMore:S,children:S?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{children:"\u52a0\u8f7d\u4e2d"}),(0,h.jsx)(o.k_,{})]}):N.length?(0,h.jsx)("span",{children:"\u6ca1\u6709\u66f4\u591a\u4e86"}):(0,h.jsx)("div",{className:"empty-content",children:(0,h.jsxs)("div",{className:"empty-center",children:[(0,h.jsx)("img",{src:a(1439),alt:""}),(0,h.jsx)("span",{children:"\u6682\u65e0\u8bfe\u7a0b"})]})})})]})})})}}}]);
//# sourceMappingURL=396.95b212dc.chunk.js.map