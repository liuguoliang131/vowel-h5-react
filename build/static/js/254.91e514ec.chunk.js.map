{"version":3,"file":"static/js/254.91e514ec.chunk.js","mappings":"qPAEIA,EAAQ,EAEL,SAAeC,IAAtB,4CAAO,OAAP,0BAAO,wFACDD,GAAS,GADR,yCAEI,IAFJ,wBAICE,EAAAA,EAAAA,GAAM,KAJP,cAKLF,IALK,kBAME,CACL,CAAEG,KAAM,gBAAOC,GAAI,IACnB,CAAED,KAAM,iBAAQC,GAAI,IACpB,CAAED,KAAM,iBAAQC,GAAI,MATjB,kE,uBC8HP,MA1HA,WACE,OAAsCC,EAAAA,EAAAA,UAAS,GAA/C,eAAOC,EAAP,KAAoBC,EAApB,KACA,GAAeF,EAAAA,EAAAA,UAAS,CACtB,CAAEF,KAAM,qBAAOC,GAAI,GACnB,CAAED,KAAM,qBAAOC,GAAI,GACnB,CAAED,KAAM,qBAAOC,GAAI,KAErB,IALA,gBAKgCC,EAAAA,EAAAA,UAAS,CACvCG,gBAAiB,sBACjBC,gBAAiB,yBAFnB,eAAiBC,GAAjB,WAkBA,GAAwBL,EAAAA,EAAAA,UAAS,IAAjC,eAAOM,EAAP,KAAaC,EAAb,KACA,GAA8BP,EAAAA,EAAAA,WAAS,GAAvC,eAAOQ,EAAP,KAAgBC,EAAhB,KA1BmB,8CA2BnB,yGAuBuBb,EAAY,CAC/B,CAAEE,KAAM,qBAAOC,GAAI,GACnB,CAAED,KAAM,qBAAOC,GAAI,GACnB,CAAED,KAAM,qBAAOC,GAAI,KA1BvB,OAuBQW,EAvBR,OA4BEH,GAAQ,SAAAI,GAAG,wBAAQA,IAAR,OAAgBD,GAAhB,IACXD,EAAWC,EAAOE,OAAS,GA7B7B,4CA3BmB,sBA4DnB,IAAMC,EAAS,yCAAG,yGAEdX,EAAe,GAFD,UAGIY,EAAAA,EAAAA,IAAoB,CACpCC,UAAW,IACXC,KAAMf,IALM,OAGRgB,EAHQ,OAOdf,GAAe,SAAAS,GAAG,OAAIA,EAAM,CAAV,IAClBO,QAAQC,IAAI,MAAOF,GACdA,EAAIX,MAASW,EAAIX,KAAKc,MAASH,EAAIX,KAAKc,KAAKR,QAIhDP,EAAY,CACVF,gBAAiBc,EAAIX,KAAKH,gBAC1BC,gBAAiBa,EAAIX,KAAKF,kBAE5BG,GAAQ,SAAAI,GAAG,wBAAQA,IAAR,OAAgBM,EAAIX,MAApB,IACXG,GAAW,KARXF,EAAQ,IACRE,GAAW,IAXC,wDAqBdA,GAAW,GArBG,+DAAH,qDAyBf,OACE,iBAAKY,UAAU,WAAf,WACE,SAAC,IAAD,CAASC,KAAK,8BACd,SAAC,KAAD,CACET,UAAW,kBAAMA,GAAN,EADb,UAGE,iBAAKQ,UAAU,OAAf,WACE,gBAAKA,UAAU,aAAf,SAEIf,EAAKiB,KAAI,SAACC,EAAMC,GAAP,OACP,iBAAKJ,UAAU,OAAf,WACE,gBAAKA,UAAU,aAAf,SAA6BG,EAAKE,SAClC,gBAAKL,UAAU,aAAf,UACE,kBAAOM,UAAQ,EAACC,aAAa,8BAC3BC,OAAQL,EAAKM,QACbC,yBAAuB,EACvBC,OAAQ,SAACC,GAAD,OAxFF,SAACR,EAAOQ,GAChCf,QAAQC,IAAIM,EAAOQ,GACnB,IAAMC,EAAeC,SAASC,qBAAqB,SACnDlB,QAAQC,IAAI,eAAgBe,GAC5B,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAAatB,OAAQyB,IAAK,CAC5C,IAAMb,EAAOU,EAAaG,GACtBZ,IAAUY,GACZb,EAAKc,OAER,CACF,CA8EkCC,CAAkBd,EAAOQ,EAAhC,EAHV,UAIE,mBAAQO,IAAKhB,EAAKiB,UAAWC,KAAK,oBAPbjB,EADpB,OAeb,gBAAKJ,UAAU,SAAf,UACE,iBAAKA,UAAU,iBAAf,WACE,uGACA,2EAGJ,SAAC,KAAD,CAAgBsB,SAnHL,2CAmHyBnC,QAASA,WAKtD,C","sources":["pages/myCourse/mock-request.jsx","pages/myCourse/index.jsx"],"sourcesContent":["import { sleep } from 'antd-mobile/es/utils/sleep'\r\n\r\nlet count = 0\r\n\r\nexport async function mockRequest () {\r\n  if (count >= 5) {\r\n    return []\r\n  }\r\n  await sleep(2000)\r\n  count++\r\n  return [\r\n    { name: '第2课', id: 11 },\r\n    { name: '第12课', id: 22 },\r\n    { name: '第44课', id: 33 }\r\n  ]\r\n}\r\n","import React, { useState } from 'react'\r\nimport Crumbs1 from '../../components/crumbs1'\r\nimport { PullToRefresh, InfiniteScroll } from 'antd-mobile'\r\n// import { sleep } from 'antd-mobile/es/utils/sleep'\r\nimport { mockRequest } from './mock-request.jsx'\r\nimport './index.scss'\r\nimport { courseLessonListApi } from '../../axios/api'\r\n\r\nfunction MyCourse () {\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [list] = useState([\r\n    { name: '第一课', id: 1 },\r\n    { name: '第二课', id: 2 },\r\n    { name: '第三课', id: 3 }\r\n  ])\r\n  const [dataTime, setDataTime] = useState({\r\n    expiration_time: '2022.09.08 11:05:30',\r\n    push_award_time: '2022.09.08 11:05:30'\r\n  })\r\n\r\n  // 播放按钮\r\n  const handlePauseOthter = (index, e) => {\r\n    console.log(index, e)\r\n    const videoDomList = document.getElementsByTagName('video')\r\n    console.log('videoDomList', videoDomList)\r\n    for (let i = 0; i < videoDomList.length; i++) {\r\n      const item = videoDomList[i]\r\n      if (index !== i) {\r\n        item.pause()\r\n      }\r\n    }\r\n  }\r\n\r\n  const [data, setData] = useState([])\r\n  const [hasMore, setHasMore] = useState(true)\r\n  async function loadMore () {\r\n    // try {\r\n    //   const res = await courseLessonListApi({\r\n    //     course_id: '1' || location.state.id,\r\n    // page:currentPage\r\n    //   })\r\n    // setCurrentPage(val => val + 1)\r\n    //   if (res.code !== 0) {\r\n    //     setHasMore(false)\r\n    //   }\r\n    //   if (!res.data || !res.data.list || !res.data.list.length) {\r\n    //     setHasMore(false)\r\n    //   } else {\r\n    //     setData(val => [...val, ...res.data.list])\r\n    // setDataTime({\r\n    //   expiration_time:res.data.expiration_time,\r\n    //   push_award_time:res.data.push_award_time\r\n    // })\r\n    //   }\r\n    // } catch (error) {\r\n    //   setHasMore(false)\r\n    //   throw error\r\n    // }\r\n    const append = await mockRequest([\r\n      { name: '第一课', id: 1 },\r\n      { name: '第二课', id: 2 },\r\n      { name: '第三课', id: 3 }\r\n    ])\r\n    setData(val => [...val, ...append])\r\n    setHasMore(append.length > 0)\r\n  }\r\n\r\n  // 下拉刷新\r\n  const onRefresh = async () => {\r\n    try {\r\n      setCurrentPage(1)\r\n      const res = await courseLessonListApi({\r\n        course_id: '1' || location.state.id,\r\n        page: currentPage\r\n      })\r\n      setCurrentPage(val => val + 1)\r\n      console.log('res', res)\r\n      if (!res.data || !res.data.list || !res.data.list.length) {\r\n        setData([])\r\n        setHasMore(false)\r\n      } else {\r\n        setDataTime({\r\n          expiration_time: res.data.expiration_time,\r\n          push_award_time: res.data.push_award_time\r\n        })\r\n        setData(val => [...val, ...res.data])\r\n        setHasMore(true)\r\n      }\r\n    } catch (error) {\r\n      setHasMore(false)\r\n      throw error\r\n    }\r\n  }\r\n  return (\r\n    <div className='MyCourse'>\r\n      <Crumbs1 text=\"我的奖品\"></Crumbs1>\r\n      <PullToRefresh\r\n        onRefresh={() => onRefresh()}\r\n      >\r\n        <div className=\"list\">\r\n          <div className=\"scroll-box\">\r\n            {\r\n              data.map((item, index) => (\r\n                <div className=\"item\" key={index}>\r\n                  <div className=\"item-title\">{item.title}</div>\r\n                  <div className=\"item-video\">\r\n                    <video controls controlslist=\"nodownload noremoteplayback\"\r\n                      poster={item.img_url}\r\n                      disablePictureInPicture\r\n                      onPlay={(e) => handlePauseOthter(index, e)}>\r\n                      <source src={item.video_url} type=\"video/mp4\" />\r\n                    </video>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n          <div className=\"footer\">\r\n            <div className=\"footer-content\">\r\n              <div>提示：本次课程的有效期为</div>\r\n              <div>2022.09.08 11:05:30-2022.09.08 11:05:30</div>\r\n            </div>\r\n          </div>\r\n          <InfiniteScroll loadMore={loadMore} hasMore={hasMore} />\r\n        </div>\r\n        </PullToRefresh>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyCourse\r\n"],"names":["count","mockRequest","sleep","name","id","useState","currentPage","setCurrentPage","expiration_time","push_award_time","setDataTime","data","setData","hasMore","setHasMore","append","val","length","onRefresh","courseLessonListApi","course_id","page","res","console","log","list","className","text","map","item","index","title","controls","controlslist","poster","img_url","disablePictureInPicture","onPlay","e","videoDomList","document","getElementsByTagName","i","pause","handlePauseOthter","src","video_url","type","loadMore"],"sourceRoot":""}